# Unity Solitaire with Combat System

一个结合了传统纸牌接龙和战斗系统的Unity游戏。

## 游戏概述

这是一个创新的纸牌游戏，将经典的Klondike纸牌接龙与RPG战斗元素相结合。玩家需要通过拖拽卡牌序列来攻击敌人，同时管理纸牌布局来获得更强的攻击组合。

## 核心功能

### 纸牌系统
- **7列Tableau布局**：标准接龙游戏布局
- **Foundation堆**：按花色从A到K排列
- **Stock堆**：点击发牌到各列
- **拖拽机制**：支持连续降序卡牌序列拖拽
- **自动翻牌**：移除卡牌后自动翻开下一张

### 战斗系统
- **敌人生成**：蝙蝠敌人带有飞行动画
- **攻击机制**：拖拽卡牌序列到敌人进行攻击
- **伤害计算**：伤害 = (卡牌数量 × 5) + 所有卡牌点数之和
- **动画效果**：敌人受击、死亡动画
- **连续战斗**：敌人死亡后自动生成新敌人

### 特殊卡牌系统
- **Joker1**（消除卡牌）
  - 图片：ClassicJokers第一张
  - 功能：点击激活选择模式，点击任意卡牌消除
  - 取消：再次点击Joker或点击空白区域
  
- **Joker2**（交换卡牌）
  - 图片：ClassicDarkJokers第一张
  - 功能：选择两张翻开的卡牌进行位置交换
  - 操作：点击第一张卡牌（高亮），点击第二张卡牌完成交换

## 技术架构

### 核心脚本

#### 卡牌相关
- **Card.cs**：基础卡牌类，定义花色、点数、颜色
- **Deck.cs**：52张卡牌管理，sprite加载和映射
- **CardDisplay.cs**：卡牌UI显示、拖拽交互、点击事件

#### 游戏管理
- **SolitaireGameManager.cs**：主游戏控制器
  - 游戏初始化和布局管理
  - 卡牌移动和验证逻辑
  - 特殊模式管理（选择/交换）
  - 敌人生成系统

#### 战斗系统
- **Enemy.cs**：基础敌人类
  - 血量系统和UI更新
  - 受伤效果和死亡处理
  - 虚拟方法供子类重写

- **Bat.cs**：蝙蝠敌人子类
  - 飞行、受击、死亡动画
  - Sprite序列管理和播放

#### 交互系统
- **DropZone.cs**：卡牌放置区域验证
- **EnemyDropZone.cs**：敌人攻击区域处理
- **Joker.cs / Joker2.cs**：特殊卡牌功能

### 资源结构
```
Resources/
├── Classic/
│   ├── ClassicCards/          # 标准52张卡牌
│   ├── ClassicJokers/         # Joker1贴图
│   ├── ClassicDarkJokers/     # Joker2贴图
│   └── Backsides/
│       └── LightClassic       # 卡背图片
└── Monster/
    └── Bat/                   # 蝙蝠动画帧
        ├── Bat_Fly_X          # 飞行动画
        ├── Bat_Hit_X          # 受击动画
        └── Bat_Death_X        # 死亡动画
```

### 卡牌映射逻辑
- **特殊2卡分组**：sprites 0-25为红心/黑桃，26-51为草花/方片
- **点数计算**：rank = (index/2)%13+1
- **花色分配**：根据index范围和奇偶性确定

## 游戏规则

### 基础接龙规则
- Tableau中只能放置降序且颜色交替的卡牌
- 空列可以放置任意卡牌（修改版规则）
- Foundation按花色从A开始升序排列
- 点击Stock堆向所有列发牌

### 战斗规则
- 拖拽卡牌序列到敌人造成伤害
- 伤害值显示在敌人上方
- 敌人血量归零后播放死亡动画并生成新敌人
- 攻击后卡牌从游戏中移除

### 特殊卡牌规则
- 每个Joker使用后可重复使用
- Joker1可消除任意翻开的卡牌
- Joker2可交换任意两张翻开的卡牌
- 使用过程中可随时取消

## 开发特色

### 创新设计
- 将传统纸牌游戏与RPG元素结合
- 卡牌序列作为攻击手段的独特机制
- 动态敌人生成保持游戏连续性

### 技术亮点
- 面向对象的敌人系统设计
- 灵活的卡牌拖拽和序列检测
- 完整的动画状态管理
- 模块化的特殊功能系统

### 扩展性
- 基础Enemy类便于添加新敌人类型
- 组件化设计支持功能扩展
- 资源加载系统支持动态内容

## 使用说明

1. **基础操作**：拖拽卡牌进行移动，点击Stock发牌
2. **攻击敌人**：拖拽卡牌序列到蝙蝠进行攻击
3. **使用Joker**：点击HandArea中的特殊卡牌使用功能
4. **游戏目标**：在战斗中生存并完成纸牌排列

## 技术要求

- Unity 2022.3+
- Input System Package
- UI系统支持
- Resources文件夹结构